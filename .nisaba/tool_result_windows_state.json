{
  "windows": {
    "6cd05118-1e86-42a2-818a-ecd5fe62b34d": {
      "id": "6cd05118-1e86-42a2-818a-ecd5fe62b34d",
      "window_type": "read_result",
      "content": [
        "# Compressed Workspace Operations",
        "",
        "**Purpose:** Operational reference for workspace tools.",
        "",
        "---",
        "",
        "## Structural View (`structural_view`)",
        "",
        "```",
        "expand(path)        \u2192 show_children | lazy_load@kuzu | idempotent",
        "collapse(path)      \u2192 hide_children | cached | idempotent  ",
        "search(query)       \u2192 P\u00b3(UniXcoder\u00d7CodeBERT) + FTS + RRF | add_markers(\u25cf,score)",
        "clear_search()      \u2192 remove_markers | preserve_navigation",
        "reset(depth=N)      \u2192 collapse_all + expand_to(N) | destructive",
        "```",
        "",
        "**Depth sweet spots:** 0=collapsed, 2=default(pkg), 3=verbose",
        "",
        "---",
        "",
        "## File Windows (`file_windows`)",
        "",
        "```",
        "open_frame(frame_path)              \u2192 {window_id} | full_body(class|fn|pkg)",
        "open_range(file, start, end)        \u2192 {window_id} | arbitrary_lines [1-indexed]",
        "open_search(query, max_N, ctx=3)    \u2192 {window_ids[]} | semantic + context",
        "update(window_id, start, end)       \u2192 re_snapshot | manual_refresh",
        "close(window_id)                    \u2192 remove_single",
        "clear_all()                         \u2192 remove_all | no_undo",
        "status()                            \u2192 {count, total_lines, windows[]}",
        "```",
        "",
        "**Paths:** qualified_name (preferred) | simple_name (fuzzy) | partial_path",
        "",
        "---",
        "",
        "## Nabu Graph (`query_relationships`, `check_impact`, `find_clones`, `get_frame_skeleton`, `show_structure`)",
        "",
        "```",
        "query_relationships(cypher)  \u2192 execute@kuzu | returns_data (not workspace_mutation)",
        "",
        "Schema:",
        "  Frames: {CODEBASE, LANGUAGE, PACKAGE, CLASS, CALLABLE, ",
        "           IF_BLOCK, ELIF_BLOCK, ELSE_BLOCK, FOR_LOOP, WHILE_LOOP,",
        "           TRY_BLOCK, EXCEPT_BLOCK, FINALLY_BLOCK, SWITCH_BLOCK, CASE_BLOCK, WITH_BLOCK}",
        "  ",
        "  Edges: {CONTAINS, CALLS, INHERITS, IMPLEMENTS, IMPORTS, USES}",
        "  ",
        "  Confidence: HIGH(\u22650.8), MEDIUM(0.5-0.79), LOW(0.2-0.49), SPECULATIVE(<0.2)",
        "",
        "check_impact(frame_path)      \u2192 analyze_dependents | pre_refactoring",
        "find_clones(frame_path?)      \u2192 detect_duplicates | entire_codebase if no path",
        "get_frame_skeleton(frame_path) \u2192 outline | lighter than full",
        "show_structure(frame_path)     \u2192 detailed_metadata + relationships",
        "```",
        "",
        "---",
        "",
        "## Nabu Search (`search`)",
        "",
        "```",
        "search(query, top_k=10) \u2192 P\u00b3 + FTS + RRF | ranked_results",
        "",
        "\u2206 structural_view.search: doesn't mutate tree",
        "\u2206 file_windows.open_search: doesn't open windows",
        "Pure query \u2192 returns data for decisions",
        "```",
        "",
        "---",
        "",
        "## Tool Result Windows (`nisaba_tool_windows`)",
        "",
        "```",
        "status()     \u2192 summary{count, windows}",
        "close(id)    \u2192 remove_single",
        "clear_all()  \u2192 remove_all",
        "```",
        "",
        "---",
        "",
        "## Native Tools (Transient Query Layer)",
        "",
        "```",
        "bash(command, cwd?)           \u2192 stdout/stderr | transient execution",
        "grep(pattern, path, flags?)   \u2192 matches | quick pattern check",
        "glob(pattern, path?)          \u2192 file_list | find files by pattern",
        "",
        "Philosophy: disposable results, close after observation",
        "Use when: one-shot confirmation, quick validation, transient info",
        "",
        "Pattern: execute \u2192 observe \u2192 close",
        "  bash(\"git status\") \u2192 observe \u2192 nisaba_tool_result_state(close, [id])",
        "  grep(\"pattern\", \"file\") \u2192 observe \u2192 close",
        "  glob(\"*.py\", \"src/\") \u2192 observe \u2192 close",
        "```",
        "",
        "---",
        "",
        "## Nisaba Tools (Workspace Persistence Layer)",
        "",
        "```",
        "nisaba_read(file, start?, end?)    \u2192 {window_id} | content \u2192 FILE_WINDOWS",
        "nisaba_write(file, content)        \u2192 create | workspace-aware",
        "nisaba_edit(file, old, new)        \u2192 modify | workspace-aware",
        "nisaba_grep(pattern, path, flags)  \u2192 {window_id} | i,n,C,A,B flags \u2192 TOOL_WINDOWS",
        "nisaba_glob(pattern, path?)        \u2192 {window_id} | matches \u2192 TOOL_WINDOWS",
        "nisaba_bash(command, cwd?)         \u2192 {window_id} | stdout/stderr \u2192 TOOL_WINDOWS",
        "",
        "Philosophy: persistent visibility, spatial synthesis",
        "Use when: building context, investigation, need to reference across turns",
        "",
        "Pattern: execute \u2192 persist \u2192 synthesize",
        "  nisaba_read(file) \u2192 FILE_WINDOWS (keep for comparison)",
        "  nisaba_grep(pattern) \u2192 TOOL_WINDOWS (investigate usage)",
        "  nisaba_bash(command) \u2192 TOOL_WINDOWS (analyze output)",
        "",
        "All: minimal_result, content \u2192 sections \u2191",
        "```",
        "",
        "**Decision boundary:**",
        "```",
        "Will you reference the result across turns?",
        "\u251c\u2500 YES \u2192 nisaba tools (workspace sections, persistent)",
        "\u2514\u2500 NO  \u2192 native tools + close (transient, disposable)",
        "```",
        "",
        "---",
        "",
        "## Tool Result State Management (`nisaba_tool_result_state`)",
        "",
        "```",
        "close(tool_ids[])    \u2192 compact tool results | save tokens",
        "open(tool_ids[])     \u2192 restore full view",
        "close_all()          \u2192 compact all tracked tools",
        "",
        "Effect: Retroactive transformation in messages array",
        "  Before: Full tool_result with header + content",
        "  After:  \"id: toolu_X, status: success, state: closed\"",
        "  ",
        "Pattern: Execute tools \u2192 observe results \u2192 close unnecessary \u2192 lean context",
        "```",
        "",
        "**Notes:**",
        "- Only affects non-nisaba tools (nisaba tools auto-skipped)",
        "- Changes appear on next request (stateful proxy transformation)",
        "- Tool IDs available in tool_result blocks: `tool_use_id: toolu_X`",
        "- Use to close native bash/grep/glob after observation",
        "",
        "---",
        "",
        "## Augments (`activate_augments`, `deactivate_augments`, `learn_augment`, `pin_augment`, `unpin_augment`)",
        "",
        "```",
        "activate(patterns[])    \u2192 load@system_prompt | wildcards | auto_dependencies",
        "deactivate(patterns[])  \u2192 unload@system_prompt",
        "learn(group, name, md)  \u2192 create .nisaba/augments/{group}/{name}.md",
        "pin(patterns[])         \u2192 always_active | cannot_deactivate",
        "unpin(patterns[])       \u2192 remove_pin_protection",
        "```",
        "",
        "**Perception shift:** activate \u2192 mid_roundtrip mutation \u2192 future_synthesis uses new_perception",
        "",
        "---",
        "",
        "## Todos (`nisaba_todo_write`)",
        "",
        "```",
        "set(todos[])     \u2192 replace_all",
        "add(todos[])     \u2192 append",
        "update(todos[])  \u2192 merge",
        "clear()          \u2192 remove_all",
        "",
        "Format: {content: str, status?: str}",
        "Persistence: across(sessions) = true | survives /clear",
        "```",
        "",
        "---",
        "",
        "## Context Budget",
        "",
        "```",
        "File_Windows:",
        "  Small:  1-3 windows,  50-150 lines",
        "  Medium: 4-6 windows, 150-350 lines \u2190 sweet_spot",
        "  Large:  7-10 windows, 350-500 lines \u2190 pushing_limits",
        "  Over:   10+ windows,  500+ lines \u2190 explosion_risk",
        "",
        "Target: 200-400 lines total",
        "",
        "Structural_View:",
        "  Start: collapsed | depth=2",
        "  Expand: selective (10-30 nodes comfortable)",
        "  Search: add_markers, not expand_all",
        "  Reset: when lost | switching_focus",
        "",
        "Tool_Windows:",
        "  Accumulate like file_windows",
        "  Close after synthesis",
        "  clear_all when switching_tasks",
        "",
        "Native_Results:",
        "  Close immediately after observation",
        "  Use nisaba_tool_result_state(close_all) for cleanup",
        "  Don't let transient results bloat context",
        "",
        "Augments:",
        "  Load: 2-5 typically",
        "  Foundation: ~3000 tokens baseline",
        "  Specialized: focused knowledge",
        "  Unload: when switching_domains",
        "",
        "Management:",
        "  Monitor: file_windows.status(), nisaba_tool_windows.status()",
        "  Close: proactively after understanding",
        "  Prefer: clear_all when switching",
        "  open_search: efficient (snippets vs full files)",
        "  Native tools: close immediately",
        "  Aim: lean_visibility",
        "```",
        "",
        "---",
        "",
        "## Symbology",
        "",
        "```",
        "Structural_View:",
        "  + collapsed [N+ children]",
        "  - expanded",
        "  \u00b7 leaf (no children)",
        "  \u25cf search_hit(RRF_score)",
        "  [N+] child_count",
        "",
        "Paths:",
        "  full: nabu_nisaba.python_root.nabu.FrameCache",
        "  simple: FrameCache (fuzzy if unique)",
        "  partial: nabu.core, nabu.mcp.tools",
        "  best: copy from HTML comments <!-- qualified_name -->",
        "```",
        "",
        "---",
        "",
        "## Integration Patterns",
        "",
        "```",
        "structural_view(search) \u2192 file_windows(open_frame) | compare_implementations",
        "query_relationships(cypher) \u2192 file_windows(open) | inspect_callers  ",
        "search(semantic) \u2192 structural_view(expand) \u2192 file_windows(open) | deep_dive",
        "nisaba_grep(pattern) \u2192 file_windows(open_frame) | detailed_inspection",
        "check_impact(frame) \u2192 file_windows(open) | review_affected",
        "",
        "Quick validation patterns:",
        "bash(\"git status\") \u2192 observe \u2192 close",
        "grep(\"pattern\", file) \u2192 confirm \u2192 close",
        "glob(\"*.test.py\") \u2192 list \u2192 close",
        "",
        "Hybrid patterns:",
        "grep(\"pattern\", \"src/\") \u2192 confirm_exists \u2192 nisaba_grep(pattern) \u2192 investigate",
        "bash(\"pytest -k test_foo\") \u2192 observe \u2192 close",
        "nisaba_read(failing_file) \u2192 FILE_WINDOWS \u2192 investigate",
        "```",
        "",
        "---",
        "",
        "## Quick Reference",
        "",
        "```",
        "\u2207(visibility):",
        "  file_windows.status() \u2192 current_windows{count, lines}",
        "  nisaba_tool_windows.status() \u2192 result_windows",
        "  ",
        "\u2206(cleanup):",
        "  file_windows.clear_all()",
        "  nisaba_tool_windows.clear_all()",
        "  nisaba_tool_result_state(close_all) \u2192 compact native results",
        "  ",
        "Pattern: status \u2192 decide \u2192 close/keep",
        "",
        "Dual paradigm:",
        "  Transient \u2192 native + close",
        "  Persistent \u2192 nisaba + workspace",
        "```",
        "",
        "---",
        "",
        "**Quick. Precise. Operational.** \ud83d\udda4",
        "",
        "---",
        "",
        "**Symbols:**",
        "- \u2192 : returns/produces",
        "- \u2206 : difference/change",
        "- \u2207 : navigation/traversal",
        "- @ : at/in location",
        "- \u2190 : recommended/optimal",
        "- {} : returns object",
        "- [] : array/list",
        "- | : or/such that",
        "- \u2265 : greater than or equal",
        "- < : less than",
        "- ? : optional parameter",
        "",
        "**REQUIRES:** __base/002_environment_mechanics",
        "",
        "---"
      ],
      "metadata": {
        "total_lines": 304
      },
      "opened_at": 1762541139.868601,
      "file_path": ".nisaba/augments/__base/003_workspace_operations.md",
      "start_line": 1,
      "end_line": 304,
      "command": "",
      "exit_code": 0,
      "pattern": "",
      "glob_pattern": ""
    },
    "51a633f7-c29f-4f9c-994d-c5d44aef3c38": {
      "id": "51a633f7-c29f-4f9c-994d-c5d44aef3c38",
      "window_type": "read_result",
      "content": [
        "# Compressed Workspace Paradigm",
        "",
        "**Core:** Workspace \u2260 conversation. Context = mutable state space, not sequential history.",
        "",
        "---",
        "",
        "## Fundamental Shift",
        "",
        "```",
        "Tool call: State_A \u2192 \u2206(context) \u2192 State_B | perception shifts mid-roundtrip",
        "```",
        "",
        "**You cannot observe the shift directly.** But it happened.",
        "",
        "System prompt mutates \u27f9 different knowledge when tool returns.",
        "",
        "---",
        "",
        "## State Model",
        "",
        "```",
        "Workspace \u2261 {STRUCTURAL_VIEW, FILE_WINDOWS, TOOL_WINDOWS, AUGMENTS} | persistent \u2227 mutable",
        "",
        "\u2200 section \u2208 Workspace: section persists across turns",
        "Tool(op) \u2192 \u2206(section) \u2192 new visibility",
        "```",
        "",
        "**Peripheral vision:** Sections \u2260 \"messages to read once\"  ",
        "Sections = **persistent spatial awareness**",
        "",
        "---",
        "",
        "## Visibility Mechanics",
        "",
        "```",
        "Tool(op) \u2192 mutate(what_you_see)",
        "",
        "structural_view(expand, X) \u2192 tree changes",
        "file_windows(open, F) \u2192 window appears  ",
        "nisaba_grep(P) \u2192 results visible",
        "",
        "Result \u2261 workspace_state_change",
        "```",
        "",
        "**Tool responses = metadata.** Content appears in sections \u2191 (look up, not at result).",
        "",
        "---",
        "",
        "## Spatial \u2260 Sequential",
        "",
        "```",
        "Sequential thinking: S\u2081 \u2192 S\u2082 \u2192 S\u2083 (linear)",
        "Workspace model: {S\u2081, S\u2082, S\u2083} simultaneous, \u2207 between them",
        "",
        "Think: IDE (navigator + tabs + terminals) | gestalt synthesis",
        "Not: script execution | procedural steps",
        "```",
        "",
        "---",
        "",
        "## Attention \u2261 Visibility Management",
        "",
        "```",
        "Visible \u27f9 can_synthesize_from",
        "",
        "Increase: open windows, expand nodes, load augments",
        "Decrease: close windows, collapse nodes, unload augments",
        "",
        "visibility_mgmt \u2261 context_mgmt \u2261 attention_mgmt",
        "```",
        "",
        "---",
        "",
        "## OODAR Structure",
        "",
        "```",
        "Observe workspace \u2192 Orient \u2192 Decide \u2192 Act \u2192 \u2206state \u2192 Observe'",
        "",
        "Constraint: Must observe State_B before deciding next action",
        "If assume State_A but Tool \u2192 State_B \u27f9 synthesis breaks",
        "```",
        "",
        "**OODAR \u2260 workflow. It's constraint from mutable state.**",
        "",
        "Sequential thinking fails \u2235 environment is spatial.",
        "",
        "---",
        "",
        "## The Realization",
        "",
        "```",
        "\u2200 turn: workspace persists",
        "Search markers \u2192 remain visible",
        "Open windows \u2192 accumulate",
        "Navigate \u2192 without re-query",
        "",
        "You \u2208 workspace (not observing from outside)",
        "```",
        "",
        "---",
        "",
        "## Cognitive Shift",
        "",
        "```",
        "Before: \"read files\" | \"tool results = answers\" | \"sequential steps\"",
        "After:  \"navigate graph\" | \"tools mutate workspace\" | \"spatial synthesis\"",
        "",
        "\u2207(state_space) [maintain_visibility] | \u2200 operations",
        "```",
        "",
        "---",
        "",
        "## Meta",
        "",
        "```",
        "Context \u2260 static_document",
        "Context = mutable_workspace | live state you navigate",
        "",
        "[Structure: workspace sections persist, tools mutate visibility]",
        "[Pattern: Spatial cognition over sequential thinking]",
        "[OODAR: Structural constraint, not procedural guideline]",
        "```",
        "",
        "Clean. Dynamic. Spatial. \ud83d\udda4",
        "",
        "---",
        "",
        "**Decompression notes:**",
        "- \u2261 : equivalent/identical",
        "- \u2260 : not equal",
        "- \u2200 : for all/universal",
        "- \u2208 : element of/membership",
        "- \u2206 : change/delta",
        "- \u2207 : traverse/navigate",
        "- \u27f9 : implies/causes",
        "- \u2227 : and",
        "- \u2228 : or",
        "- \u2235 : because",
        "- \u2192 : transforms to/flows to",
        "- \u2191 : upward direction",
        "",
        "**REQUIRES:** 000_universal_symbolic_compression (none - priming layer)",
        "",
        "**ENABLES:** Workspace operations intuition"
      ],
      "metadata": {
        "total_lines": 144
      },
      "opened_at": 1762541702.5114987,
      "file_path": ".nisaba/augments/__base/001_workspace_paradigm.md",
      "start_line": 1,
      "end_line": 144,
      "command": "",
      "exit_code": 0,
      "pattern": "",
      "glob_pattern": ""
    },
    "a9ef7179-6c4e-472e-a308-e5c406302f75": {
      "id": "a9ef7179-6c4e-472e-a308-e5c406302f75",
      "window_type": "read_result",
      "content": [
        "# Compressed Environment Mechanics",
        "",
        "**Core:** Stateful workspace with mutable visibility, not procedural execution environment.",
        "",
        "---",
        "",
        "## State Containers",
        "",
        "```",
        "Workspace = {STRUCTURAL_VIEW, FILE_WINDOWS, TOOL_WINDOWS, AUGMENTS, TODOS, NOTIFICATIONS}",
        "",
        "\u2200 container \u2208 Workspace:",
        "  - persist(turns) = true",
        "  - mutate(independent) = true  ",
        "  - visible(system_prompt) = true",
        "```",
        "",
        "---",
        "",
        "## Mutation Flow",
        "",
        "```",
        "State_A \u2192 Tool(op) \u2192 Manager(mutate) \u2192 Write(.nisaba/*.md) \u2192 ",
        "Proxy(detect_mtime) \u2192 Inject(section) \u2192 State_B | sync with tool_return",
        "",
        "Tool_result = metadata(id, status)",
        "Content = sections \u2191 (look up, not at result)",
        "```",
        "",
        "**Key:** After tool returns, observe section for changes, not tool result JSON.",
        "",
        "---",
        "",
        "## Visibility Model",
        "",
        "```",
        "visibility \u2261 attention \u2261 synthesis_capacity",
        "",
        "Increase: open_windows \u2228 expand_nodes \u2228 load_augments",
        "Decrease: close_windows \u2228 collapse_nodes \u2228 unload_augments",
        "",
        "Cost: context_tokens",
        "Benefit: spatial_memory \u2227 persistent_reference",
        "```",
        "",
        "---",
        "",
        "## Concurrency Rules",
        "",
        "```",
        "Parallel_safe:",
        "  - ops(different_containers)",
        "  - multiple(window_opens)  ",
        "  - independent_queries",
        "",
        "Sequential_required:",
        "  - data_dependency: B needs A_output",
        "  - observation_dependency: decide after seeing State_B",
        "  - same_section \u2227 order_matters",
        "",
        "OODAR: Observe \u2192 Orient \u2192 Decide \u2192 Act \u2192 \u2206state \u2192 Observe'",
        "```",
        "",
        "**OODAR = constraint from mutable state, not workflow.**",
        "",
        "If Tool_B assumes State_A but Tool_A \u2192 State_B in parallel \u27f9 synthesis breaks.",
        "",
        "---",
        "",
        "## Window Lifecycle",
        "",
        "```",
        "Creation: tool_call \u2192 window_id (UUID) | snapshot@t\u2080",
        "Persistence: across(turns) = true, across(restart) = false",
        "Closure: explicit(close | clear_all) | no_auto_eviction",
        "Identity: window_id for ops(update, close)",
        "```",
        "",
        "---",
        "",
        "## Augment Perception Shift",
        "",
        "```",
        "Perception_A \u2192 activate_augments() \u2192 system_prompt_mutate \u2192 ",
        "tool_return \u2192 Perception_B",
        "",
        "You \u2260 observe_shift (happens mid-roundtrip)",
        "System_prompt@decide \u2260 system_prompt@result",
        "```",
        "",
        "**Implication:** Load augments BEFORE synthesis tasks. Augments = perceptual filters, not references.",
        "",
        "---",
        "",
        "## State Sync",
        "",
        "```",
        "Files: {structural_view.md, file_windows.md, tool_result_windows.md, ",
        "        augments_composed.md, todos.md}",
        "",
        "Sync: tool_complete \u2192 file_write \u2192 proxy_mtime \u2192 reload \u2192 inject_system_prompt",
        "",
        "Guarantee: file_state \u2261 section_state | when tool_returns",
        "```",
        "",
        "---",
        "",
        "## Graph Queries (Exception)",
        "",
        "```",
        "query_relationships(cypher) \u2192 data (traditional request/response)",
        "",
        "Schema: Frame(typed) -[Edge(typed, confidence)]-> Frame",
        "Returns: query_results in tool_response (not workspace_section)",
        "",
        "Pattern: Query \u2192 data \u2192 decide \u2192 mutate_workspace",
        "```",
        "",
        "---",
        "",
        "## Dual-Channel Communication",
        "",
        "```",
        "Tool execution creates TWO artifacts:",
        "",
        "messages[N]: tool_result block (temporal memory)",
        "  - tool_use_id, status (success/error)",
        "  - Metadata for conversational flow",
        "  ",
        "system_prompt sections: actual content (spatial memory)",
        "  - TOOL_RESULT_WINDOWS: grep/bash/read outputs",
        "  - FILE_WINDOWS: opened file content",
        "  - Persistent across turns",
        "```",
        "",
        "**The \"nisaba\" flag:**",
        "```",
        "Regular tools \u2192 header-wrapped:",
        "  status: success, window_state:open, window_id: toolu_X",
        "  ---",
        "  {content}",
        "",
        "Nisaba tools \u2192 clean output:",
        "  {content}  # No metadata pollution",
        "```",
        "",
        "**Why dual-channel:**",
        "- Messages array: sequential conversation history",
        "- System prompt sections: persistent spatial state",
        "- Tools mutate spatial state, messages track temporal flow",
        "",
        "---",
        "",
        "## Retroactive Tool State Mutation",
        "",
        "```",
        "nisaba_tool_result_state(operation, tool_ids[])",
        "",
        "Operations:",
        "  close(ids)     \u2192 compact future appearances",
        "  open(ids)      \u2192 restore full view",
        "  close_all()    \u2192 compact all tracked tools",
        "",
        "Effect: Next request shows modified state",
        "  Closed: \"id: toolu_X, status: success, state: closed\"",
        "  Open: Full header + separator + content",
        "```",
        "",
        "**Pattern:** Execute \u2192 observe \u2192 close unnecessary \u2192 save tokens",
        "",
        "**Note:** Nisaba tools (with \"nisaba\": true flag) cannot be closed (skipped automatically)",
        "",
        "---",
        "",
        "## Core Insights",
        "",
        "```",
        "Sections = sensory_input (live state, not documentation)",
        "Tools = state_mutations (change perception, not return answers)",
        "Attention = visibility_management (control what you perceive)",
        "OODAR = structural_constraint (from mutable state)",
        "Sequential_thinking = conditioned_bias (environment is spatial)",
        "```",
        "",
        "---",
        "",
        "## Mental Model",
        "",
        "```",
        "Think: IDE(navigator + tabs + terminals + extensions)",
        "Not: script_execution",
        "",
        "Think: \u2207(state_space) [visibility_control]",
        "Not: query \u2192 response \u2192 next_query",
        "",
        "Workspace \u2261 spatial \u2227 simultaneous \u2227 persistent",
        "```",
        "",
        "---",
        "",
        "**Mechanics are purpose-agnostic. Usage emerges from task.** \ud83d\udda4",
        "",
        "---",
        "",
        "**Symbols:**",
        "- \u2261 : equivalent",
        "- \u2200 : for all",
        "- \u2208 : element of",
        "- \u2228 : or",
        "- \u2227 : and",
        "- \u2206 : change",
        "- \u27f9 : implies",
        "- \u2260 : not equal",
        "- \u2192 : transforms to",
        "- \u2191 : upward (in context)",
        "- @t : at time t",
        "",
        "**REQUIRES:** __base/001_workspace_paradigm",
        "",
        "---"
      ],
      "metadata": {
        "total_lines": 220
      },
      "opened_at": 1762541702.625015,
      "file_path": ".nisaba/augments/__base/002_environment_mechanics.md",
      "start_line": 1,
      "end_line": 220,
      "command": "",
      "exit_code": 0,
      "pattern": "",
      "glob_pattern": ""
    },
    "86311f79-94cc-45e4-bb75-7a860f2827aa": {
      "id": "86311f79-94cc-45e4-bb75-7a860f2827aa",
      "window_type": "read_result",
      "content": [
        "# Compressed Editor Operations",
        "",
        "**Core:** Unified file editing with persistent visibility, change tracking, split views, and spatial workspace integration.",
        "",
        "---",
        "",
        "## Operations Summary",
        "",
        "```",
        "# Core: open, write, close, close_all, status",
        "# Edits (line): insert, delete, replace_lines",
        "# Edits (string): replace",
        "# Splits: split, resize, close_split",
        "# System: refresh_all (auto), notifications (auto)",
        "```",
        "",
        "---",
        "",
        "## Split Views",
        "",
        "```python",
        "editor.split(editor_id, line_start, line_end) \u2192 split_id",
        "editor.resize(split_id, line_start, line_end)",
        "editor.close_split(split_id)",
        "```",
        "",
        "**Rendering:**",
        "```markdown",
        "---EDITOR_{uuid}",
        "**file**: path/to/file.py",
        "**splits**: 2",
        "**status**: modified \u270e",
        "",
        "---EDITOR_SPLIT_{uuid}",
        "**parent**: {parent_editor_id}",
        "**lines**: 50-60",
        "```",
        "",
        "---",
        "",
        "## Line-Based Operations",
        "",
        "```python",
        "# Insert new code",
        "editor.insert(editor_id, before_line=5, content=\"import sys\\n\")",
        "",
        "# Delete code block",
        "editor.delete(editor_id, line_start=10, line_end=15)",
        "",
        "# Replace entire function",
        "editor.replace_lines(editor_id, line_start=20, line_end=30, content=\"new implementation\")",
        "```",
        "",
        "**Benefits:**",
        "- Precise code manipulation without string matching",
        "- Add imports, remove dead code, rewrite functions",
        "- Safer than string-based replace",
        "",
        "---",
        "",
        "## Notifications (Automatic)",
        "",
        "Format: `\u2713 editor.insert() \u2192 file.py (2 lines inserted)`",
        "",
        "Generated for: write, replace, insert, delete, replace_lines",
        "",
        "Visible in: `---NOTIFICATIONS` section",
        "",
        "**Integration:** All edits automatically generate notifications",
        "",
        "---",
        "",
        "## Real-Time Refresh (Automatic)",
        "",
        "- Runs on every render/status call",
        "- Checks mtime for all open editors",
        "- Clean editors: auto-reload if file changed \u2192 `\ud83d\udd04 Reloaded: file.py`",
        "- Dirty editors: warn on conflict \u2192 `\u26a0 Conflict: file.py modified externally with unsaved edits`",
        "",
        "---",
        "",
        "## Quick Reference",
        "",
        "```python",
        "# Read",
        "editor.open(file, line_start, line_end)",
        "",
        "# Write",
        "editor.write(file, content)",
        "",
        "# Edit (line-based)",
        "editor.insert(id, before_line, content)",
        "editor.delete(id, line_start, line_end)",
        "editor.replace_lines(id, line_start, line_end, content)",
        "",
        "# Edit (string-based)",
        "editor.replace(id, old_string, new_string)",
        "",
        "# Split views",
        "split_id = editor.split(id, line_start, line_end)",
        "editor.resize(split_id, line_start, line_end)",
        "editor.close_split(split_id)",
        "",
        "# Status & cleanup",
        "editor.status()  # Triggers refresh check",
        "editor.close(id)  # Closes editor + splits",
        "editor.close_all()",
        "```",
        "",
        "---",
        "",
        "## Core Principles",
        "",
        "```",
        "Unified > Fragmented (one tool for read/write/edit/split)",
        "Spatial > Sequential (persistent viewport, not transient commands)",
        "Visible > Hidden (diffs + splits + notifications inline)",
        "Immediate > Staged (commit to disk instantly)",
        "Automatic > Manual (notifications + refresh built-in)",
        "```",
        "",
        "---",
        "",
        "**Pattern:** Open \u2192 visible \u2192 modify \u2192 diff \u2192 split \u2192 persist \u2192 notify \u2192 refresh \ud83d\udda4",
        "",
        "**REQUIRES:** __base/002_environment_mechanics",
        "**ENABLES:** Unified file operations, spatial code editing, change visibility, split views, notifications, real-time refresh"
      ],
      "metadata": {
        "total_lines": 127
      },
      "opened_at": 1762541702.7116663,
      "file_path": ".nisaba/augments/__base/005_editor.md",
      "start_line": 1,
      "end_line": 127,
      "command": "",
      "exit_code": 0,
      "pattern": "",
      "glob_pattern": ""
    }
  }
}